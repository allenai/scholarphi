/**
 * Position annotations absolutely on each page
 */
.scholar-reader-annotation-span {
  position: absolute;
}

/**
 * Enlarge the hitbox of an annotation
 */
.scholar-reader-annotation-span {
  margin: -@highlight-hitbox-padding * 2/3 -@highlight-hitbox-padding;
  padding: @highlight-hitbox-padding * 2/3 @highlight-hitbox-padding;
}

/**
 * Make annotations interactive
 */
.scholar-reader-annotation {
  /**
   * Highlight all spans of an annotation when hovering over any one span of the annotation
   */
  &:hover .scholar-reader-annotation-span {
    background: @highlight-hover-background;
    opacity: @highlight-hover-opacity;
    cursor: pointer;
  }

  /**
   * Deepen the saturation of colors when the annotation is selected
   */
  &.selected .scholar-reader-annotation-span {
    &:not(.find-selection) {
      background-color: @highlight-color;
      opacity: @highlight-opacity;
    }
  }

  .scholar-reader-annotation-span.active {
    /**
     * Provide an underline as a hint that the annotation is interactive 
     */
    &.underline {
      border-bottom: @underline-width @underline-color dotted;
    }
  }
}

/**
 * Highlight matches from search
 */
.scholar-reader-annotation-span {
  &.find-match {
    background-color: green;
    opacity: 0.2;
  }

  &.find-selection {
    background-color: green;
    opacity: 0.4;
  }
}

/**
 * Make inactive annotations non-interactive
 */
.scholar-reader-annotation-span.inactive {
  pointer-events: none;

  .user-annotation {
    background: none;
    pointer-events: none;
    border: 1px dotted black;
  }
}

/**
 * Highlight entities that were extracted using experimental techniques
 */
.scholar-reader-annotation-span.source-other {
  background-color: rgba(255, 255, 0, 0.3);
}

/**
 * Set z-index of annotation spans to minimize occlusion. For example, sentences annotations will
 * often contain the full area of other annotations. To allow the other annotations to be
 * clickable, show sentence annotations under other annotations.
 */
.scholar-reader-annotation-span {
  &.sentence-annotation {
    z-index: @base-annotation-z-index;
  }

  &:not(.sentence-annotation) {
    z-index: @base-annotation-z-index + 1;
  }
}

/**
 * Symbol annotations
 */
.symbol-annotation {
  &.selected:not(.leaf-symbol) {
    background: none !important;
    border: 4px solid @highlight-color;
    border-radius: @border-radius;
  }

  &.child-of-selection {
    background-color: @highlight-color;
    animation: pulse 0.5s ease-in-out infinite alternate;
  }

  @keyframes pulse {
    0% {
      opacity: 0.1;
    }
    100% {
      opacity: @highlight-opacity;
    }
  }
}
